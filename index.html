<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Global Trade Dashboard</title>
<style>
  body { font-family: Arial; background:#f5f5f5; margin:0; }
  header { background:#1f2937; color:white; padding:20px; text-align:center; }
  .section { background:white; margin:20px; padding:20px; border-radius:10px; }
  table { width:100%; border-collapse:collapse; }
  th, td { padding:10px; border:1px solid #ddd; text-align:center; }
  th { background:#333; color:white; }
  .news-item { margin-bottom:10px; }
  .testimonial { border-left: 4px solid #1f2937; padding-left: 10px; margin-bottom: 10px; font-style: italic; }
  .contact { display:flex; flex-direction: column; }
  .contact input, .contact textarea { margin-bottom: 10px; padding: 8px; width:100%; }
  .contact button { padding: 10px; background:#1f2937; color:white; border:none; cursor:pointer; }
  .contact button:hover { background:#111827; }
</style>
</head>
<body>

<header>
  <h1>Global Trade Dashboard</h1>
  <p>Live stock prices and latest news from around the world</p>
</header>

<div class="section">
  <h2>Live Stocks</h2>
  <table id="stocks">
    <thead>
      <tr><th>Symbol</th><th>Price</th><th>Change</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<div class="section">
  <h2>Latest News</h2>
  <div id="news">Loading...</div>
</div>

<div class="section">
  <h2>Testimonials</h2>
  <div class="testimonial">"This dashboard keeps me on top of my trades!" – Jenna</div>
  <div class="testimonial">"Real-time numbers are exactly what I needed." – Amro Shlemo</div>
</div>

<div class="section">
  <h2>Contact Us</h2>
  <form class="contact" onsubmit="alert('Message sent!'); return false;">
    <input type="text" placeholder="Your Name" required>
    <input type="email" placeholder="Your Email" required>
    <textarea placeholder="Your Message" rows="4" required></textarea>
    <button type="submit">Send Message</button>
  </form>
</div>

<script>
// Load live stock prices
async function loadStocks() {
  try {
    const res = await fetch("/api/stocks");
    const data = await res.json();
    const tbody = document.querySelector("#stocks tbody");
    tbody.innerHTML = "";

    data.forEach(stock => {
      const change = (stock.c - stock.pc).toFixed(2);
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${stock.symbol}</td>
        <td>$${stock.c}</td>
        <td style="color:${change >= 0 ? 'green':'red'}">${change}</td>
      `;
      tbody.appendChild(row);
    });
  } catch (err) {
    console.error("Failed to load stocks", err);
  }
}

// Load latest news
async function loadNews() {
  try {
    const res = await fetch("/api/news");
    const data = await res.json();
    const newsDiv = document.getElementById("news");
    newsDiv.innerHTML = "";

    data.forEach(item => {
      const div = document.createElement("div");
      div.className = "news-item";
      div.innerHTML = `<a href="${item.url}" target="_blank">${item.headline}</a>`;
      newsDiv.appendChild(div);
    });
  } catch (err) {
    console.error("Failed to load news", err);
  }
}

// Initial load
loadStocks();
loadNews();

// Refresh stocks every 5 seconds
setInterval(loadStocks, 5000);
</script>

</body>
</html>
